/*
 *  jQuery Bookmarklet - v0.1.0
 *  jQuery plugin to make bookmarklets from JavaScript files.
 *  http://michaelbrooks.github.io/jquery-bookmarklet
 *
 *  Made by Michael Brooks
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.$element=a(this.element);var f=a.extend({},{gist_id:this.$element.data("bookmarklet-gist-id"),gist_filename:this.$element.data("bookmarklet-gist-filename"),raw:this.$element.data("bookmarklet-raw")});this.settings=a.extend({},d,f,e),this._defaults=d,this._name=c,this.init()}var c="bookmarklet",d={gist_api_url:"https://api.github.com/gists/"},e={gist:function(){var b=this.settings.gist_id,c=this.settings.gist_api_url,d=this.settings.gist_filename;return a.getJSON(c+b).then(function(a){var b;if(d)b=a.files[d];else{if(1!==Object.keys(a.files).length)throw"Gist contains multiple files. Use 'gist_filename' setting to specify.";b=a.files[Object.keys(a.files)[0]]}return b.content})},raw:function(){return a.get(this.settings.raw)}};b.prototype={init:function(){var a,b=this;if(this.settings.raw)a=e.raw.call(this);else{if(!this.settings.gist_id)throw"Bookmarklet settings must include either 'gist_id' or 'raw'.";a=e.gist.call(this)}a.done(function(a){b.$element.attr("href",b.build_url(a))}).fail(function(a){throw a})},build_url:function(a){return"javascript:"+encodeURIComponent(a)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);